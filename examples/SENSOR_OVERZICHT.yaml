# ================================================================================
# TIBBER ADVANCED - COMPLEET SENSOR OVERZICHT
# ================================================================================
#
# Dit bestand geeft een volledig overzicht van ALLE sensoren die de Tibber
# Advanced integratie aanmaakt, inclusief:
# - Welke sensoren STANDAARD INGESCHAKELD zijn
# - Welke sensoren STANDAARD UITGESCHAKELD zijn (diagnostic)
# - Alle beschikbare attributen per sensor
# - Welke sensoren je moet gebruiken voor automatiseringen
#
# ‚ö†Ô∏è BELANGRIJK - ENTITY_ID vs FRIENDLY NAME:
# 
# Entity_id (voor templates/automaties): sensor.tibber_pulse_rijksweg_100_electricity_price_total_incl_vat
# Friendly name (in UI):                  Totale prijs incl. BTW
#
# De entity_id's in dit bestand zijn in het ENGELS (zoals ze in HA bestaan!)
# De friendly names zijn in het NEDERLANDS (alleen in de UI zichtbaar)
#
# GEBRUIK:
# Kopieer dit naar je Developer Tools ‚Üí Template om live data te zien
# Vergeet niet JOUW_ADRES te vervangen met bijv. rijksweg_100
#
# ================================================================================

# ================================================================================
# DEEL 1: PRIJS SENSOREN (PRICE SENSORS)
# ================================================================================

# --------------------------------------------------------------------------------
# 1.1 HOOFDSENSOR - TOTALE PRIJS (ALTIJD GEBRUIKEN VOOR VERBRUIK!)
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat
# Key: electricity_price
# Status: ‚úÖ STANDAARD INGESCHAKELD
# Gebruik: VERBRUIK beslissingen (apparaten inschakelen, batterij laden, etc.)
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat') }} EUR/kWh
#
# Dit is de OFFICI√ãLE Tibber API prijs inclusief ALLES:
# - Nord Pool spotprijs
# - Tibber inkoopvergoeding (surcharge)
# - Energiebelasting (NL)
# - BTW (21%)
#
# Attributen:
price_info_summary:
  current:
    startsAt: {{ state_attr('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat', 'price_info_summary').current.startsAt }}
    total: {{ state_attr('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat', 'price_info_summary').current.total }}  # Totale prijs incl. alles
    energy: {{ state_attr('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat', 'price_info_summary').current.energy }}  # Nord Pool spotprijs (excl. alles)
    tax: {{ state_attr('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat', 'price_info_summary').current.tax }}  # ‚ö†Ô∏è ZWEEDS veld (niet NL energiebelasting!)
    level: {{ state_attr('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat', 'price_info_summary').current.level }}  # VERY_CHEAP/CHEAP/NORMAL/EXPENSIVE/VERY_EXPENSIVE
  
  upcoming: (6 volgende kwartieren)
    # Gebruik: state_attr(...).upcoming[0].total voor volgend kwartier
  
  today_all: (96 kwartieren van vandaag 00:00-23:45)
    # Gebruik voor grafieken: state_attr(...).today_all
  
  tomorrow_all: (96 kwartieren van morgen 00:00-23:45)
    # Beschikbaar na 13:00 uur
  
  next_24h: (rolling 24 uur vanaf nu)
    # Perfect voor "komende 24 uur" grafieken
  
  next_48h: (rolling 48 uur vanaf nu)
    # Perfect voor "komende 2 dagen" grafieken
  
  stats:
    today_min: {{ state_attr('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat', 'price_info_summary').stats.today_min }}
    today_max: {{ state_attr('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat', 'price_info_summary').stats.today_max }}
    today_avg: {{ state_attr('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat', 'price_info_summary').stats.today_avg }}
    tomorrow_available: {{ state_attr('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat', 'price_info_summary').stats.tomorrow_available }}
    tomorrow_min: {{ state_attr('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat', 'price_info_summary').stats.tomorrow_min }}
    tomorrow_max: {{ state_attr('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat', 'price_info_summary').stats.tomorrow_max }}
    tomorrow_avg: {{ state_attr('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat', 'price_info_summary').stats.tomorrow_avg }}

# --------------------------------------------------------------------------------
# 1.2 NORD POOL SPOTPRIJS (GEBRUIKEN VOOR ZONNEPANELEN!)
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_electricity_base_price_without_surcharge
# Key: electricity_price_excl_base
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
# Gebruik: TERUGLEVERING beslissingen (omvormer aan/uit, saldering)
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_electricity_base_price_without_surcharge') }} EUR/kWh
#
# Dit is de PURE NORD POOL SPOTPRIJS (electricity market price):
# - ‚úÖ Alleen groothandelsprijs elektriciteit
# - ‚ùå Geen Tibber surcharge
# - ‚ùå Geen energiebelasting  
# - ‚ùå Geen BTW
# - ‚ö†Ô∏è KAN NEGATIEF ZIJN! (bij veel zon/wind en weinig vraag)
#
# ‚ö†Ô∏è BELANGRIJK:
# - Tot 2027: Voor teruglevering bereken: (spotprijs √ó 1.21) + energiebelasting
# - Na 2027: Voor teruglevering gebruik: spotprijs √ó 1.21 (geen EB meer!)
#
# Attributen: Geen extra attributen

# --------------------------------------------------------------------------------
# 1.3 MIN/MAX/AVG SENSOREN - VANDAAG (TOTALE PRIJS)
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_vandaag_laagste_prijs
# Key: electricity_price_today_min
# Status: ‚úÖ STANDAARD INGESCHAKELD
# Gebruik: Snel zien wat de laagste prijs van vandaag is
# NAAM: In UI zie je "Vandaag laagste prijs" (NL vertaling)
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_vandaag_laagste_prijs') }} EUR/kWh
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_vandaag_hoogste_prijs
# Key: electricity_price_today_max
# Status: ‚úÖ STANDAARD INGESCHAKELD
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_vandaag_hoogste_prijs') }} EUR/kWh
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_vandaag_gemiddelde_prijs
# Key: electricity_price_today_avg
# Status: ‚úÖ STANDAARD INGESCHAKELD
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_vandaag_gemiddelde_prijs') }} EUR/kWh
# Attributen: Geen

# --------------------------------------------------------------------------------
# 1.4 MIN/MAX/AVG SENSOREN - MORGEN (TOTALE PRIJS)
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_morgen_laagste_prijs
# Key: electricity_price_tomorrow_min
# Status: ‚úÖ STANDAARD INGESCHAKELD
# Gebruik: Planning voor morgen (jacuzzi, boiler, batterij, etc.)
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_morgen_laagste_prijs') }} EUR/kWh
# State: "unknown" tot 13:00 uur, daarna beschikbaar
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_morgen_hoogste_prijs
# Key: electricity_price_tomorrow_max
# Status: ‚úÖ STANDAARD INGESCHAKELD
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_morgen_hoogste_prijs') }} EUR/kWh
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_morgen_gemiddelde_prijs
# Key: electricity_price_tomorrow_avg
# Status: ‚úÖ STANDAARD INGESCHAKELD
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_morgen_gemiddelde_prijs') }} EUR/kWh
# Attributen: Geen

# --------------------------------------------------------------------------------
# 1.5 MIN/MAX/AVG SENSOREN - SPOTPRIJS VANDAAG (VOOR ZONNEPANELEN)
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_vandaag_laagste_spotprijs
# Key: electricity_spotprice_today_min
# Status: ‚úÖ STANDAARD INGESCHAKELD
# Gebruik: Zien wanneer spotprijs het laagst is (voor teruglevering na 2027)
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_vandaag_laagste_spotprijs') }} EUR/kWh
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_vandaag_hoogste_spotprijs
# Key: electricity_spotprice_today_max
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_vandaag_gemiddelde_spotprijs
# Key: electricity_spotprice_today_avg

# --------------------------------------------------------------------------------
# 1.6 MIN/MAX/AVG SENSOREN - SPOTPRIJS MORGEN (VOOR ZONNEPANELEN)
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_morgen_laagste_spotprijs
# Key: electricity_spotprice_tomorrow_min
# Status: ‚úÖ STANDAARD INGESCHAKELD
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_morgen_laagste_spotprijs') }} EUR/kWh
# State: "unknown" tot 13:00 uur
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_morgen_hoogste_spotprijs
# Key: electricity_spotprice_tomorrow_max
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_morgen_gemiddelde_spotprijs
# Key: electricity_spotprice_tomorrow_avg

# --------------------------------------------------------------------------------
# 1.7 ENERGIEBELASTING SENSOREN
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_electricity_energy_tax_excl_vat
# Key: electricity_price_energy_tax_excl
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_electricity_energy_tax_excl_vat') }} EUR/kWh
# Bron: Configuratie (instelbaar bij integratie opties)
# Standaard: 0.10148 EUR/kWh (2024/2025 tarief excl. BTW)
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_electricity_energy_tax_incl_vat
# Key: electricity_price_energy_tax_incl
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_electricity_energy_tax_incl_vat') }} EUR/kWh
# Berekening: energy_tax_excl √ó 1.21
# Standaard: 0.1228 EUR/kWh (2024/2025)
# Attributen: Geen

# --------------------------------------------------------------------------------
# 1.8 DEBUG/DIAGNOSTIC SENSOREN
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat_calculated
# Key: electricity_price_calc
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
# Gebruik: DEBUG - vergelijken met offici√´le Tibber API prijs
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat_calculated') }} EUR/kWh
# Berekening: ((spotprijs + surcharge + energy_tax) √ó 1.21)
# ‚ö†Ô∏è GEBRUIK DIT NIET VOOR AUTOMATIES! Gebruik electricity_price
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_electricity_price_excl_energy_tax_incl_vat
# Key: electricity_price_excl
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_electricity_price_excl_energy_tax_incl_vat') }} EUR/kWh
# Berekening: (spotprijs + surcharge) √ó 1.21
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_electricity_price_excl_tax_in_cents
# Key: electricity_price_excl_tax_in_cents
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_electricity_price_excl_tax_in_cents') }} cent/kWh
# Berekening: (spotprijs + surcharge) √ó 100
# Beschrijving: Prijs exclusief BTW in centen
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_tax_rate
# Key: tax_rate
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_tax_rate') }} %
# Bron: Configuratie (instelbaar bij integratie opties)
# Standaard: 21 %
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_last_price_update
# Key: last_price_update
# Status: ‚úÖ STANDAARD INGESCHAKELD
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_last_price_update') }}
# Type: Timestamp
# Attributen: Geen

# --------------------------------------------------------------------------------
# 1.10 PRIJS RANKING SENSOREN (LEGACY - NIET AANBEVOLEN)
# --------------------------------------------------------------------------------
# ‚ö†Ô∏è Deze sensoren zijn van de OUDE Tibber integratie overgenomen maar NIET AANBEVOLEN
# Gebruik in plaats daarvan: attributes.price_info_summary met custom template logic
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_hour_in_is_the_top_x_cheapest_hours_today
# Key: hour_cheapest_top
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_hour_in_is_the_top_x_cheapest_hours_today') }}
# Beschrijving: Rank 0-1 voor huidig uur vergeleken met alle uren vandaag (0 = goedkoopst)
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_hour_in_is_the_top_x_cheapest_hours_today_between_0_00_and_8_00
# Key: hour_cheapest_top_after_0000
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
#
# Beschrijving: Rank 0-1 vergeleken met nachturen (00:00-08:00)
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_hour_in_is_the_top_x_cheapest_hours_today_between_8_00_and_18_00
# Key: hour_cheapest_top_after_0800
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
#
# Beschrijving: Rank 0-1 vergeleken met daguren (08:00-18:00)
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_hour_in_is_the_top_x_cheapest_hours_today_between_18_00_and_0_00
# Key: hour_cheapest_top_after_1800
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
#
# Beschrijving: Rank 0-1 vergeleken met avonduren (18:00-00:00)

# --------------------------------------------------------------------------------
# 1.11 SURCHARGE SENSOREN (GEEN TIBBER PULSE PREFIX!)
# --------------------------------------------------------------------------------
# ‚ö†Ô∏è LET OP: Deze sensoren hebben NIET het "tibber_pulse_" prefix!
# Ze komen van de configuratie, niet van de Tibber Pulse hardware.
#
# Entity: sensor.JOUW_ADRES_inkoopvergoeding_excl_btw_geconfigureerd
# Key: electricity_price_purchasing_compensation_excl
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
#
# Waarde: {{ states('sensor.JOUW_ADRES_inkoopvergoeding_excl_btw_geconfigureerd') }} EUR/kWh
# Bron: Configuratie (instelbaar bij integratie opties)
# Standaard: 0.0205 EUR/kWh (Tibber standaard tarief)
# Attributen: Geen
#
# ---
#
# Entity: sensor.JOUW_ADRES_inkoopvergoeding_incl_btw_berekend
# Key: electricity_price_purchasing_compensation_incl
# Status: ‚ö†Ô∏è STANDAARD UITGESCHAKELD (diagnostic)
#
# Waarde: {{ states('sensor.JOUW_ADRES_inkoopvergoeding_incl_btw_berekend') }} EUR/kWh
# Berekening: surcharge_excl √ó 1.21
# Attributen: Geen

# ================================================================================
# DEEL 2: VERBRUIK/PRODUCTIE SENSOREN (TIBBER PULSE)
# ================================================================================

# --------------------------------------------------------------------------------
# 2.1 REAL-TIME VERMOGEN
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_power
# Key: power
# Status: ‚úÖ STANDAARD INGESCHAKELD
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_power') }} W
# Beschrijving: Huidig vermogen (positief = verbruik, negatief = productie)
# Update: Real-time (elke seconde via websocket)
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_power_production
# Key: power_production
# Status: ‚úÖ STANDAARD INGESCHAKELD (alleen met zonnepanelen)
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_power_production') }} W
# Beschrijving: Huidige zonnepanelen productie
# Attributen: Geen

# --------------------------------------------------------------------------------
# 2.2 GEMIDDELD/MIN/MAX VERMOGEN
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_average_power
# Key: average_power
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_average_power') }} W
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_min_power
# Key: min_power
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_max_power
# Key: max_power

# --------------------------------------------------------------------------------
# 2.3 CUMULATIEF VERBRUIK/PRODUCTIE
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_accumulated_consumption
# Key: accumulated_consumption
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_accumulated_consumption') }} kWh
# Beschrijving: Totaal verbruik sinds installatie Pulse
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_accumulated_consumption_current_hour
# Key: accumulated_consumption_last_hour
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_accumulated_consumption_current_hour') }} kWh
# Beschrijving: Verbruik in dit uur (reset elk uur op :00)
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_estimated_consumption_current_hour
# Key: estimated_consumption_current_hour
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_estimated_consumption_current_hour') }} kWh
# Beschrijving: Geschat totaal verbruik dit uur (op basis van huidig gemiddelde)
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_accumulated_production
# Key: accumulated_production
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_accumulated_production') }} kWh
# Beschrijving: Totale productie sinds installatie
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_accumulated_production_current_hour
# Key: accumulated_production_last_hour
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_accumulated_production_current_hour') }} kWh
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_last_meter_consumption
# Key: last_meter_consumption
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_last_meter_consumption') }} kWh
# Beschrijving: Laatste meterstand verbruik (totaalteller)
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_last_meter_production
# Key: last_meter_production
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_last_meter_production') }} kWh
# Beschrijving: Laatste meterstand productie (totaalteller)

# --------------------------------------------------------------------------------
# 2.4 KOSTEN/OPBRENGSTEN
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_accumulated_consumption_cost
# Key: accumulated_consumption_cost
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_accumulated_consumption_cost') }} EUR
# Beschrijving: Totale kosten verbruik sinds installatie
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_accumulated_cost
# Key: accumulated_cost
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_accumulated_cost') }} EUR
# Beschrijving: Totale kosten sinds installatie (historische prijzen)
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_accumulated_reward
# Key: accumulated_reward
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_accumulated_reward') }} EUR
# Beschrijving: Totale opbrengst teruglevering

# --------------------------------------------------------------------------------
# 2.5 MAANDELIJKSE STATISTIEKEN
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_monthly_cost
# Key: month_cost
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_monthly_cost') }} EUR
# Beschrijving: Kosten deze maand
# Attributen: Geen
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_monthly_net_consumption
# Key: month_cons
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_monthly_net_consumption') }} kWh
# Beschrijving: Netto verbruik deze maand
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_monthly_peak_hour_consumption
# Key: peak_hour
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_monthly_peak_hour_consumption') }} kWh
# Beschrijving: Hoogste uur verbruik deze maand
#
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_time_of_max_hour_consumption
# Key: peak_hour_time
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_time_of_max_hour_consumption') }}
# Type: Timestamp
# Beschrijving: Wanneer was het hoogste uur verbruik

# --------------------------------------------------------------------------------
# 2.6 ELEKTRISCHE METINGEN (3-FASE)
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_current_l1
# Key: current_l1
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_current_l1') }} A
# Beschrijving: Stroom op fase 1
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_current_l2
# Key: current_l2
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_current_l2') }} A
# Beschrijving: Stroom op fase 2

# Entity: sensor.tibber_pulse_JOUW_ADRES_current_l3
# Key: current_l3
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_current_l3') }} A
# Beschrijving: Stroom op fase 3
# ---
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_voltage_phase1
# Key: voltage_phase1
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_voltage_phase1') }} V
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_voltage_phase2
# Key: voltage_phase2
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_voltage_phase2') }} V
#
# Entity: sensor.tibber_pulse_JOUW_ADRES_voltage_phase3
# Key: voltage_phase3
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_voltage_phase3') }} V

# --------------------------------------------------------------------------------
# 2.7 PULSE HARDWARE INFO
# --------------------------------------------------------------------------------
# Entity: sensor.tibber_pulse_JOUW_ADRES_signal_strength
# Key: signal_strength
#
# Waarde: {{ states('sensor.tibber_pulse_JOUW_ADRES_signal_strength') }} dBm
# Beschrijving: WiFi signaalsterkte Pulse

# ================================================================================
# DEEL 3: WELKE SENSOREN GEBRUIKEN VOOR WAT?
# ================================================================================

# üìã CHEATSHEET - WELKE SENSOR VOOR WELK DOEL?
#
# ‚úÖ VERBRUIK OPTIMALISEREN (apparaten inschakelen bij lage prijs):
#    ‚Üí sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat
#    ‚Üí attributes.price_info_summary.next_24h
#    ‚Üí sensor.tibber_pulse_JOUW_ADRES_vandaag_laagste_prijs
#    ‚Üí sensor.tibber_pulse_JOUW_ADRES_morgen_laagste_prijs
#
# ‚úÖ ZONNEPANELEN TERUGLEVERING (omvormer aan/uit):
#    ‚Üí sensor.tibber_pulse_JOUW_ADRES_electricity_base_price_without_surcharge
#    ‚Üí sensor.tibber_pulse_JOUW_ADRES_vandaag_laagste_spotprijs
#    ‚Üí OF: gebruik custom template sensor voor netto tarief (zie template_teruglevering_netto_tarief.yaml)
#
# ‚úÖ BATTERIJ LADEN (alleen bij negatieve prijzen):
#    ‚Üí sensor.tibber_pulse_JOUW_ADRES_electricity_base_price_without_surcharge < 0
#
# ‚úÖ GRAFIEKEN/DASHBOARDS (24/48 uur vooruitkijkend):
#    ‚Üí attributes.price_info_summary.next_24h (rolling 24 uur)
#    ‚Üí attributes.price_info_summary.next_48h (rolling 48 uur)
#    ‚Üí attributes.price_info_summary.today_all (vandaag 00:00-23:45)
#    ‚Üí attributes.price_info_summary.tomorrow_all (morgen 00:00-23:45)
#
# ‚úÖ VERBRUIK MONITOREN (real-time):
#    ‚Üí sensor.tibber_pulse_JOUW_ADRES_power
#    ‚Üí sensor.tibber_pulse_JOUW_ADRES_accumulated_consumption_current_hour
#
# ‚úÖ ZONNEPANELEN PRODUCTIE:
#    ‚Üí sensor.tibber_pulse_JOUW_ADRES_power_production
#    ‚Üí sensor.tibber_pulse_JOUW_ADRES_accumulated_production_current_hour
#
# ‚ùå NIET GEBRUIKEN VOOR AUTOMATIES:
#    ‚Üí sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat_calculated (debug only!)
#    ‚Üí sensor.tibber_pulse_JOUW_ADRES_electricity_price_excl_energy_tax_incl_vat (incomplete)

# ================================================================================
# DEEL 4: ENTITEITEN DIE NIET BESTAAN (VAAK GEVRAAGD)
# ================================================================================

# ‚ùå Deze sensoren bestaan NIET in Tibber Advanced:
#
# - "electricity_price_level" ‚Üí Gebruik: attributes.price_info_summary.current.level
# - "electricity_price_rank" ‚Üí NIET GE√èMPLEMENTEERD
# - "grid_power" ‚Üí Moet je zelf berekenen: power - power_production
# - "battery_*" ‚Üí Tibber heeft geen batterij integratie
# - "car_charger_*" ‚Üí Tibber heeft geen autolader integratie
#
# Deze moet je ZELF maken als template sensors!

# ================================================================================
# VOORBEELD: ALLE PRIJZEN VAN VANDAAG UITPRINTEN
# ================================================================================

{% set sensor_name = 'sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat' %}
{% set prices = state_attr(sensor_name, 'price_info_summary') %}
{% if prices and prices.today_all %}
Vandaag prijzen ({{ prices.today_all | length }} kwartieren):
{% for entry in prices.today_all %}
  {{ entry.startsAt }}: ‚Ç¨{{ entry.total }}/kWh (spotprijs: ‚Ç¨{{ entry.energy }}/kWh)
{% endfor %}
{% else %}
ERROR: Sensor '{{ sensor_name }}' niet gevonden of price_info_summary niet beschikbaar.
Vervang JOUW_ADRES met je eigen adres (bijv. rijksweg_100).
{% endif %}

# ================================================================================
# VOORBEELD: GOEDKOOPSTE 4 UREN VANDAAG VINDEN
# ================================================================================

{% set sensor_name = 'sensor.tibber_pulse_JOUW_ADRES_electricity_price_total_incl_vat' %}
{% set prices = state_attr(sensor_name, 'price_info_summary') %}
{% if prices and prices.today_all %}
{% set sorted = prices.today_all | sort(attribute='total') %}
Goedkoopste 4 uren vandaag:
{% for entry in sorted[:4] %}
  {{ entry.startsAt }}: ‚Ç¨{{ entry.total }}/kWh
{% endfor %}
{% else %}
ERROR: Sensor '{{ sensor_name }}' niet gevonden of price_info_summary niet beschikbaar.
Vervang JOUW_ADRES met je eigen adres (bijv. rijksweg_100).
{% endif %}

# ================================================================================
# TOTAAL AANTAL SENSOREN
# ================================================================================
#
# PRIJZEN: 26 sensoren totaal
#   - 1 hoofd totale prijs sensor (INGESCHAKELD) [tibber_pulse_*]
#   - 1 spotprijs sensor (UITGESCHAKELD) [tibber_pulse_*]
#   - 6 min/max/avg vandaag/morgen totale prijs (INGESCHAKELD) [tibber_pulse_*]
#   - 6 min/max/avg vandaag/morgen spotprijs (INGESCHAKELD) [tibber_pulse_*]
#   - 2 energiebelasting sensoren (UITGESCHAKELD) [tibber_pulse_*]
#   - 2 surcharge sensoren (UITGESCHAKELD) [GEEN tibber_pulse prefix!]
#   - 4 berekende/debug sensoren (UITGESCHAKELD) [tibber_pulse_*]
#   - 4 prijs ranking sensoren (UITGESCHAKELD, legacy) [tibber_pulse_*]
#
# VERBRUIK/PRODUCTIE (Tibber Pulse): 26 sensoren
#   - 1 maandelijkse kosten sensor [tibber_pulse_*]
#   - 1 peak hour sensor [tibber_pulse_*]
#   - 1 peak hour tijd sensor [tibber_pulse_*]
#   - 1 maandelijks verbruik sensor [tibber_pulse_*]
#   - 4 vermogen sensoren (power, average, min, max) [tibber_pulse_*]
#   - 9 cumulatieve sensoren (consumption, production, cost, reward, meter readings, etc) [tibber_pulse_*]
#   - 3 voltage sensoren (phase 1/2/3) [tibber_pulse_*]
#   - 3 current sensoren (L1/L2/L3) [tibber_pulse_*]
#   - 2 productie sensoren (power_production, accumulated) [tibber_pulse_*]
#   - 1 signal strength sensor [tibber_pulse_*]
#
# TOTAAL: 52 sensoren per adres
#   - 50 sensoren met "tibber_pulse_JOUW_ADRES_" prefix
#   - 2 sensoren met "JOUW_ADRES_" prefix (surcharge sensors)
#
# BELANGRIJK:
# - "tibber_pulse_" sensoren komen van de Tibber Pulse hardware + Tibber API
# - Sensoren ZONDER "tibber_pulse_" komen van de integratie configuratie
#
# ================================================================================

